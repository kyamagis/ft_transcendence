# ミュータブルについて

作成者: FukumaNaoya
最終更新日時: 2023年7月14日 15:24

## 対象となる概念の整理

- プリミティブ型のデータ
- プリミティブ型の変数が紐づくメモリアドレス
- オブジェクト型の変数が紐づくメモリアドレス
- オブジェクト型の変数が指すオブジェクト内のプロパティ（以下、プリミティブとオブジェクトがあり、再帰的にルールが適用）

### 変更の可否

承知しました。以下にそれぞれのミュータブル性を表にまとめます。

| 対象 | ミュータブル（変更可能）か |
| --- | --- |
| プリミティブ型のデータ | ✗ (イミュータブル) |
| プリミティブ型の変数が紐づくメモリアドレス | ◯ (ミュータブル)※再代入可能 |
| オブジェクト型の変数が紐づくメモリアドレス | ◯ (ミュータブル)※再代入可能 |
| オブジェクト型の変数が指すオブジェクト内のプロパティ（プリミティブ型） | ✗ (イミュータブル) |
| オブジェクト型の変数が指すオブジェクト内のプロパティ（オブジェクト型） | ◯ (ミュータブル) |

### コードスニペット

1. プリミティブ型のデータ
    
    ```jsx
    let str = "hello";
    str[0] = "H"; // 文字列はイミュータブルなので、これはエラーになります
    console.log(str); // => "hello"
    
    ```
    
2. プリミティブ型の変数が紐づくメモリアドレス
    
    ```jsx
    let num = 1;
    num = 2; // 変数numが紐づくメモリアドレスの値を変更する
    console.log(num); // => 2
    
    ```
    
3. オブジェクト型の変数が紐づくメモリアドレス
    
    ```jsx
    let obj1 = { prop: "original" };
    obj1 = { prop: "new" }; // 変数obj1が紐づくメモリアドレスの値（オブジェクトへの参照）を変更する
    console.log(obj1); // => { prop: "new" }
    
    ```
    
4. オブジェクト型の変数が指すオブジェクト内のプロパティ（プリミティブ型）
    
    ```jsx
    let obj2 = { prop: "original" };
    obj2.prop = "new"; // 変数obj2が指すオブジェクト内のプロパティの値を変更する
    console.log(obj2); // => { prop: "new" }
    
    ```
    
5. オブジェクト型の変数が指すオブジェクト内のプロパティ（オブジェクト型）
    
    ```jsx
    let obj3 = { prop: { innerProp: "original" } };
    obj3.prop = { innerProp: "new" }; // 変数obj3が指すオブジェクト内のプロパティの値（別のオブジェクトへの参照）を変更する
    console.log(obj3); // => { prop: { innerProp: "new" } }
    
    ```